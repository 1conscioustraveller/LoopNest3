<!-- Welcome to Loop Animation - Copy this block at the top of every HTML file -->
<!DOCTYPE html>
<html>
<head>
  <!-- Your existing head content -->
</head>
<body>
  <!-- Welcome animation container - will be removed after animation completes -->
  <div id="welcome-root"></div>

  <!-- Load React, ReactDOM, and Babel from CDN -->
  <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Welcome Animation Component -->
  <script type="text/babel">
    function WelcomeAnimation() {
      const [visible, setVisible] = React.useState(true);
      
      React.useEffect(() => {
        // Check if animation has been shown this session
        const hasSeenWelcome = sessionStorage.getItem('welcomeSeen') === 'true';
        
        if (hasSeenWelcome) {
          // If already seen, remove component immediately
          setVisible(false);
          setTimeout(() => {
            const rootElement = document.getElementById('welcome-root');
            if (rootElement) {
              ReactDOM.unmountComponentAtNode(rootElement);
              rootElement.remove();
            }
          }, 0);
          return;
        }
        
        // Set flag that animation has been shown
        sessionStorage.setItem('welcomeSeen', 'true');
        
        // Remove component after animation completes (2000ms)
        const timer = setTimeout(() => {
          setVisible(false);
          setTimeout(() => {
            const rootElement = document.getElementById('welcome-root');
            if (rootElement) {
              ReactDOM.unmountComponentAtNode(rootElement);
              rootElement.remove();
            }
          }, 500); // Allow fade-out to complete
        }, 2000);
        
        return () => clearTimeout(timer);
      }, []);
      
      // If not visible, render nothing
      if (!visible) return null;
      
      return (
        <div style={{
          position: 'fixed',
          top: 0,
          left: 0,
          width: '100%',
          height: '100%',
          display: 'flex',
          justifyContent: 'center',
          alignItems: 'center',
          backgroundColor: 'rgba(0, 0, 0, 0.85)',
          zIndex: 9999,
          opacity: 1,
          transition: 'opacity 0.5s ease-out',
          animation: 'fadeIn 0.5s ease-out forwards'
        }}>
          <div style={{
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center',
            justifyContent: 'center'
          }}>
            {/* Logo SVG - inline for zero external dependencies */}
            <div style={{
              animation: 'scaleUp 1.5s ease-out forwards',
              transform: 'scale(0.5)',
              opacity: 0
            }}>
              <svg width="120" height="120" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
                <defs>
                  <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stopColor="#6366F1" />
                    <stop offset="100%" stopColor="#EC4899" />
                  </linearGradient>
                </defs>
                <circle cx="60" cy="60" r="50" fill="none" stroke="url(#logoGradient)" strokeWidth="8" 
                  strokeDasharray="314" strokeDashoffset="314" style={{animation: 'drawCircle 1s ease-out forwards 0.2s'}} />
                <path d="M40,40 L40,80 M60,30 L60,90 M80,40 L80,80" stroke="url(#logoGradient)" strokeWidth="8" strokeLinecap="round"
                  strokeDasharray="50" strokeDashoffset="50" style={{animation: 'drawLines 1s ease-out forwards 0.7s'}} />
              </svg>
            </div>
            
            {/* Text with staggered animation */}
            <div style={{
              marginTop: '20px',
              fontFamily: 'Arial, sans-serif',
              fontSize: '24px',
              fontWeight: 'bold',
              color: 'white',
              textAlign: 'center',
              opacity: 0,
              animation: 'fadeUp 1s ease-out forwards 0.8s'
            }}>
              Welcome to Loop
            </div>
            
            <div style={{
              marginTop: '10px',
              fontFamily: 'Arial, sans-serif',
              fontSize: '16px',
              color: 'rgba(255, 255, 255, 0.8)',
              textAlign: 'center',
              opacity: 0,
              animation: 'fadeUp 1s ease-out forwards 1s'
            }}>
              The future of mobile music production
            </div>
          </div>
        </div>
      );
    }
    
    // Only render if we haven't seen the welcome animation this session
    if (sessionStorage.getItem('welcomeSeen') !== 'true') {
      ReactDOM.render(<WelcomeAnimation />, document.getElementById('welcome-root'));
    } else {
      // If already seen, remove the root element
      const rootElement = document.getElementById('welcome-root');
      if (rootElement) {
        rootElement.remove();
      }
    }
  </script>
  
  <!-- Animation keyframes -->
  <style>
    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    
    @keyframes fadeUp {
      0% { 
        opacity: 0;
        transform: translateY(20px);
      }
      100% { 
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes scaleUp {
      0% { 
        transform: scale(0.5);
        opacity: 0;
      }
      100% { 
        transform: scale(1);
        opacity: 1;
      }
    }
    
    @keyframes drawCircle {
      to {
        stroke-dashoffset: 0;
      }
    }
    
    @keyframes drawLines {
      to {
        stroke-dashoffset: 0;
      }
    }
  </style>
  
  <!-- Your existing body content -->
</body>
</html>
